um_friends_ajax=!1,jQuery(document).ready(function(){jQuery(".um-friends-m").length&&(jQuery(".um-friends-m").each(function(){var e=jQuery(this).attr("data-max");if(0<e&&jQuery(this).find(".um-friends-m-user").length>e){var r=e-1;jQuery(this).find(".um-friends-m-user:gt("+r+")").hide();var n=jQuery(this).find(".um-friends-m-user").length-jQuery(this).find(".um-friends-m-user:visible").length;jQuery('<div class="um-friends-m-user show-all">+'+n+"</div>").insertAfter(jQuery(this).find(".um-friends-m-user:visible:last"))}}),jQuery(document.body).on("click",".um-friends-m-user.show-all",function(e){return e.preventDefault(),jQuery(this).parents(".um-friends-m").find(".um-friends-m-user").show(),jQuery(this).hide(),!1})),jQuery(document.body).on("mouseenter",".um-unfriend-btn",function(e){jQuery(this).hasClass("um_friends_ajax")||(jQuery(this).addClass("um-unfriend-btn2"),jQuery(this).html(jQuery(this).attr("data-unfriend")))}),jQuery(document.body).on("mouseleave",".um-unfriend-btn2",function(e){jQuery(this).hasClass("um_friends_ajax")||(jQuery(this).removeClass("um-unfriend-btn2"),jQuery(this).html(jQuery(this).attr("data-friends")))}),jQuery(document.body).on("mouseenter",".um-friend-pending-btn",function(){jQuery(this).addClass("cancel-friend-request"),jQuery(this).html(jQuery(this).attr("data-cancel-friend-request"))}),jQuery(document.body).on("mouseleave",".um-friend-pending-btn",function(){jQuery(this).removeClass("cancel-friend-request"),jQuery(this).html(jQuery(this).attr("data-pending-friend-request"))}),jQuery(document.body).on("click",".um-friend-btn",function(e){if(e.preventDefault(),1==um_friends_ajax)return!1;um_friends_ajax=!0;var r=jQuery(this);r.addClass("um_friends_ajax");var n=jQuery(this).attr("data-user_id1"),t=jQuery(this).attr("data-user_id2");return jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_friends_add",user_id1:n,user_id2:t,nonce:um_scripts.nonce},dataType:"json",success:function(e){e.success?(r.replaceWith(e.data.btn),r.removeClass("um_friends_ajax")):console.log(e.success),um_friends_ajax=!1},error:function(e){console.log(e)}}),!1}),jQuery(document.body).on("click",".um-friend-accept-btn",function(e){if(e.preventDefault(),in_dropdown=!1,1==um_friends_ajax)return!1;um_friends_ajax=!0;var r=jQuery(this);r.addClass("um_friends_ajax");var n=jQuery(this).attr("data-user_id1"),t=jQuery(this).attr("data-user_id2"),u=r.parent().find(".um-friend-reject-btn");return 0<r.parents(".um-dropdown").length&&(in_dropdown=!0),jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_friends_approve",user_id1:n,user_id2:t,nonce:um_scripts.nonce},dataType:"json",success:function(e){1==in_dropdown?(r.parents(".um-friend-respond-zone").find(".um-friend-respond-btn").replaceWith(e.btn),UM_hide_menus()):(r.replaceWith(e.btn),u.remove(),r.removeClass("um_friends_ajax")),um_friends_ajax=!1},error:function(e){console.log(e)}}),!1}),jQuery(document.body).on("click",".um-unfriend-btn",function(e){if(e.preventDefault(),1==um_friends_ajax)return!1;um_friends_ajax=!0;var r=jQuery(this);r.addClass("um_friends_ajax");var n=jQuery(this).attr("data-user_id1"),t=jQuery(this).attr("data-user_id2");return jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_friends_unfriend",user_id1:n,user_id2:t,nonce:um_scripts.nonce},dataType:"json",success:function(e){r.replaceWith(e.btn),um_friends_ajax=!1,r.removeClass("um_friends_ajax")}}),!1}),jQuery(document.body).on("click",".um-friend-reject-btn",function(e){if(e.preventDefault(),in_dropdown=!1,1==um_friends_ajax)return!1;um_friends_ajax=!0;var r=jQuery(this);r.addClass("um_friends_ajax");var n=jQuery(this).attr("data-user_id1"),t=jQuery(this).attr("data-user_id2"),u=r.parent().find(".um-friend-accept-btn");return 0<r.parents(".um-dropdown").length&&(in_dropdown=!0),jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_friends_unfriend",user_id1:n,user_id2:t,nonce:um_scripts.nonce},dataType:"json",success:function(e){1==in_dropdown?(r.parents(".um-friend-respond-zone").find(".um-friend-respond-btn").replaceWith(e.btn),UM_hide_menus()):(r.replaceWith(e.btn),u.remove(),r.removeClass("um_friends_ajax")),um_friends_ajax=!1}}),!1}),jQuery(document.body).on("click",".um-friend-respond-btn",function(){jQuery(this).parent().trigger("click")}),jQuery(document.body).on("click",".um-friend-pending-btn.cancel-friend-request",function(e){if(e.preventDefault(),1==um_friends_ajax)return!1;um_friends_ajax=!0;var r=jQuery(this);r.addClass("um_friends_ajax");var n=jQuery(this).attr("data-user_id1"),t=jQuery(this).attr("data-user_id2");return jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_friends_cancel_request",user_id1:n,user_id2:t,nonce:um_scripts.nonce},dataType:"json",success:function(e){r.replaceWith(e.btn),um_friends_ajax=!1,r.removeClass("um_friends_ajax")}}),!1})});