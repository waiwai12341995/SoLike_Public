jQuery(document).ready(function(){jQuery(document).on("click",".um-completeness-save a.skip",function(e){e.preventDefault();var t=jQuery(".um-completeness-editwrap").attr("data-key"),a=jQuery(".um-completeness-step[data-key="+t+"]").next(".um-completeness-step:not(.completed,.is-core)").attr("data-key");return a?jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_profile_completeness_edit_popup",key:a,nonce:um_scripts.nonce},success:function(e){e.success?(show_Modal(e.data),responsive_Modal(),jQuery(".um-popup .um-s1").select2({allowClear:!0,minimumResultsForSearch:10}),jQuery(".um-datepicker").each(function(){if(elem=jQuery(this),""!=elem.attr("data-disabled_weekdays"))var e=JSON.parse(elem.attr("data-disabled_weekdays"));else e=!1;var t=elem.attr("data-years"),a=elem.attr("data-date_min"),r=elem.attr("data-date_max");a=a.split(","),r=r.split(",");elem.pickadate({selectYears:t,min:a,max:r,disable:e,format:elem.attr("data-format"),formatSubmit:"yyyy/mm/dd",hiddenName:!0,onOpen:function(){elem.blur()},onClose:function(){elem.blur()}})}),jQuery(".um-timepicker").each(function(){elem=jQuery(this),elem.pickatime({format:elem.attr("data-format"),interval:parseInt(elem.attr("data-intervals")),formatSubmit:"HH:i",hiddenName:!0,onOpen:function(){elem.blur()},onClose:function(){elem.blur()}})})):remove_Modal()}}):remove_Modal(),!1}),jQuery(document).on("click",".um-completeness-save a.save",function(e){e.preventDefault();var t=!0,a=jQuery(this).parents(".um-completeness-editwrap").find("input[type=text],input[type=radio],input[type=checkbox],textarea,select").attr("type");if(!(r=jQuery(this).parents(".um-completeness-editwrap").find("input[type=text],input[type=radio],input[type=checkbox],textarea,select").attr("name")))var r=jQuery(this).parents(".um-completeness-editwrap").attr("data-key");if(jQuery(this).parents(".um-completeness-editwrap").find("select").length&&0==jQuery(this).parents(".um-completeness-editwrap").find(".picker").length&&(a="select",r=jQuery(this).parents(".um-completeness-editwrap").find("select").attr("id")),"radio"==a)(s=jQuery('input[name="'+r+'"]:checked').val())&&(t=!1);else if("checkbox"==a){var s=[];jQuery('input[name="'+r+'"]:checked').each(function(e){s.push(jQuery(this).val())}),s&&(t=!1,s=s.join(", "))}else if("select"==a){(s=jQuery("#"+r).val())&&(t=!1),jQuery(".um-popup select[multiple]").length&&s&&(t=!1,s=s.join(", "))}else{1==jQuery(this).parents(".um-completeness-editwrap").find("textarea").length&&(r=jQuery(this).parents(".um-completeness-editwrap").find("textarea").attr("id"));s=jQuery(".um-completeness-field #"+r).val();if(jQuery(this).parents(".um-popup").find(".picker").length)s=jQuery("#"+r+"_hidden").val()||jQuery("#"+r).parents(".um-field-area").find("[type=hidden][name="+r+"]").val();0<s.trim().length&&(t=!1)}return r=(r=r.replace("[]","")).replace("um_completeness_widget_",""),t||!s?jQuery('input[name="'+r+'"]').focus():jQuery.ajax({url:wp.ajax.settings.url,type:"post",dataType:"json",data:{action:"um_profile_completeness_save_popup",key:r,value:s,nonce:um_scripts.nonce},success:function(e){var t=jQuery(".um-completeness-step[data-key="+r+"]").next(".um-completeness-step:not(.completed,.is-core)").attr("data-key");jQuery(".um-completeness-done").animate({width:e.percent+"%"}),jQuery("div[data-key="+r+"]").addClass("completed"),jQuery(".um-completeness-jx").html(e.percent),(t=jQuery(".um-completeness-step[data-key="+r+"]").next(".um-completeness-step:not(.completed,.is-core)").attr("data-key"))?(jQuery(".um-completeness-editwrap").css({opacity:.5}),jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_profile_completeness_edit_popup",key:t,nonce:um_scripts.nonce},success:function(e){e.success?(show_Modal(e.data),responsive_Modal(),jQuery(".um-completeness-editwrap").css({opacity:1}),jQuery(".um-popup .um-s1").select2({allowClear:!0,minimumResultsForSearch:10}),jQuery(".um-datepicker").each(function(){if(elem=jQuery(this),""!=elem.attr("data-disabled_weekdays"))var e=JSON.parse(elem.attr("data-disabled_weekdays"));else e=!1;var t=elem.attr("data-years"),a=elem.attr("data-date_min"),r=elem.attr("data-date_max");a=a.split(","),r=r.split(",");elem.pickadate({selectYears:t,min:a,max:r,disable:e,format:elem.attr("data-format"),formatSubmit:"yyyy/mm/dd",hiddenName:!0,onOpen:function(){elem.blur()},onClose:function(){elem.blur()}})}),jQuery(".um-timepicker").each(function(){elem=jQuery(this),elem.pickatime({format:elem.attr("data-format"),interval:parseInt(elem.attr("data-intervals")),formatSubmit:"HH:i",hiddenName:!0,onOpen:function(){elem.blur()},onClose:function(){elem.blur()}})})):(remove_Modal(),location.reload())}})):(remove_Modal(),location.reload())}}),!1}),jQuery(document).on("click",'body.um-own-profile a[data-modal="um_upload_single"]',function(e){var t=jQuery(".um-completeness-widget").attr("data-user_id");t&&jQuery("#um_upload_single").attr("data-user_id",t)}),jQuery(document).on("click",".um-completeness-edit",function(e){if(jQuery(this).attr("data-key")&&!jQuery(this).parents(".um-completeness-step").hasClass("completed")){var t=jQuery(this).attr("data-key");return prepare_Modal(),jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_profile_completeness_edit_popup",key:t,nonce:um_scripts.nonce},success:function(e){e.success?(show_Modal(e.data),responsive_Modal(),jQuery(".um-popup .um-s1").select2({allowClear:!0,minimumResultsForSearch:10}),jQuery(".um-datepicker").each(function(){if(elem=jQuery(this),""!=elem.attr("data-disabled_weekdays"))var e=JSON.parse(elem.attr("data-disabled_weekdays"));else e=!1;var t=elem.attr("data-years"),a=elem.attr("data-date_min"),r=elem.attr("data-date_max");a=a.split(","),r=r.split(",");elem.pickadate({selectYears:t,min:a,max:r,disable:e,format:elem.attr("data-format"),formatSubmit:"yyyy/mm/dd",hiddenName:!0,onOpen:function(){elem.blur()},onClose:function(){elem.blur()}})}),jQuery(".um-timepicker").each(function(){elem=jQuery(this),elem.pickatime({format:elem.attr("data-format"),interval:parseInt(elem.attr("data-intervals")),formatSubmit:"HH:i",hiddenName:!0,onOpen:function(){elem.blur()},onClose:function(){elem.blur()}})})):remove_Modal()}}),!1}if(!jQuery(this).parents(".um-completeness-step").hasClass("is-core"))return!1})});